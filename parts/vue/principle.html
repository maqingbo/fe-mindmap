<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>fe-mindmap</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/fe-mindmap/images/icon.png">
    <meta name="description" content="">
    
    <link rel="preload" href="/fe-mindmap/assets/css/0.styles.83faaa54.css" as="style"><link rel="preload" href="/fe-mindmap/assets/js/app.2313ca78.js" as="script"><link rel="preload" href="/fe-mindmap/assets/js/2.367c7136.js" as="script"><link rel="preload" href="/fe-mindmap/assets/js/19.352063da.js" as="script"><link rel="prefetch" href="/fe-mindmap/assets/js/10.a735a60c.js"><link rel="prefetch" href="/fe-mindmap/assets/js/11.a09db141.js"><link rel="prefetch" href="/fe-mindmap/assets/js/12.dc945f1b.js"><link rel="prefetch" href="/fe-mindmap/assets/js/13.be277bb7.js"><link rel="prefetch" href="/fe-mindmap/assets/js/14.ed4e2a78.js"><link rel="prefetch" href="/fe-mindmap/assets/js/15.8e799c99.js"><link rel="prefetch" href="/fe-mindmap/assets/js/16.2a72c335.js"><link rel="prefetch" href="/fe-mindmap/assets/js/17.05a9ccb3.js"><link rel="prefetch" href="/fe-mindmap/assets/js/18.d9f2fd29.js"><link rel="prefetch" href="/fe-mindmap/assets/js/20.74592666.js"><link rel="prefetch" href="/fe-mindmap/assets/js/21.b48a0411.js"><link rel="prefetch" href="/fe-mindmap/assets/js/22.68d5806a.js"><link rel="prefetch" href="/fe-mindmap/assets/js/23.255292b0.js"><link rel="prefetch" href="/fe-mindmap/assets/js/24.3c7b05c2.js"><link rel="prefetch" href="/fe-mindmap/assets/js/25.9bfd7147.js"><link rel="prefetch" href="/fe-mindmap/assets/js/26.ae90a97e.js"><link rel="prefetch" href="/fe-mindmap/assets/js/27.82d5ae52.js"><link rel="prefetch" href="/fe-mindmap/assets/js/28.71766b51.js"><link rel="prefetch" href="/fe-mindmap/assets/js/29.01469bc9.js"><link rel="prefetch" href="/fe-mindmap/assets/js/3.2990a663.js"><link rel="prefetch" href="/fe-mindmap/assets/js/30.ac8e20df.js"><link rel="prefetch" href="/fe-mindmap/assets/js/31.09c8a2db.js"><link rel="prefetch" href="/fe-mindmap/assets/js/32.c98de73f.js"><link rel="prefetch" href="/fe-mindmap/assets/js/33.19e35612.js"><link rel="prefetch" href="/fe-mindmap/assets/js/34.bd574764.js"><link rel="prefetch" href="/fe-mindmap/assets/js/35.5020a715.js"><link rel="prefetch" href="/fe-mindmap/assets/js/36.08ed0b4a.js"><link rel="prefetch" href="/fe-mindmap/assets/js/37.084018c8.js"><link rel="prefetch" href="/fe-mindmap/assets/js/38.8c2dad9f.js"><link rel="prefetch" href="/fe-mindmap/assets/js/39.15d6df1a.js"><link rel="prefetch" href="/fe-mindmap/assets/js/4.b51e0ba0.js"><link rel="prefetch" href="/fe-mindmap/assets/js/40.80557e25.js"><link rel="prefetch" href="/fe-mindmap/assets/js/41.1a5df992.js"><link rel="prefetch" href="/fe-mindmap/assets/js/42.cceff778.js"><link rel="prefetch" href="/fe-mindmap/assets/js/43.0cb4813c.js"><link rel="prefetch" href="/fe-mindmap/assets/js/44.8699179c.js"><link rel="prefetch" href="/fe-mindmap/assets/js/45.b0be2719.js"><link rel="prefetch" href="/fe-mindmap/assets/js/46.a49c0a8c.js"><link rel="prefetch" href="/fe-mindmap/assets/js/47.01abe663.js"><link rel="prefetch" href="/fe-mindmap/assets/js/48.7510173f.js"><link rel="prefetch" href="/fe-mindmap/assets/js/49.0287c9b6.js"><link rel="prefetch" href="/fe-mindmap/assets/js/5.cc9a3184.js"><link rel="prefetch" href="/fe-mindmap/assets/js/50.7ab81d67.js"><link rel="prefetch" href="/fe-mindmap/assets/js/51.f879535e.js"><link rel="prefetch" href="/fe-mindmap/assets/js/52.929d6d49.js"><link rel="prefetch" href="/fe-mindmap/assets/js/53.05203e53.js"><link rel="prefetch" href="/fe-mindmap/assets/js/54.7f170b4c.js"><link rel="prefetch" href="/fe-mindmap/assets/js/55.fc31ffbb.js"><link rel="prefetch" href="/fe-mindmap/assets/js/56.395000a9.js"><link rel="prefetch" href="/fe-mindmap/assets/js/57.ce05be86.js"><link rel="prefetch" href="/fe-mindmap/assets/js/58.03e61541.js"><link rel="prefetch" href="/fe-mindmap/assets/js/59.31721b78.js"><link rel="prefetch" href="/fe-mindmap/assets/js/6.77b32da6.js"><link rel="prefetch" href="/fe-mindmap/assets/js/60.bdfd51ee.js"><link rel="prefetch" href="/fe-mindmap/assets/js/61.af2f8485.js"><link rel="prefetch" href="/fe-mindmap/assets/js/62.4af00ff7.js"><link rel="prefetch" href="/fe-mindmap/assets/js/63.899b10d8.js"><link rel="prefetch" href="/fe-mindmap/assets/js/64.7134763a.js"><link rel="prefetch" href="/fe-mindmap/assets/js/65.3fe9db18.js"><link rel="prefetch" href="/fe-mindmap/assets/js/66.937163a0.js"><link rel="prefetch" href="/fe-mindmap/assets/js/67.ac436056.js"><link rel="prefetch" href="/fe-mindmap/assets/js/68.2c86d5ec.js"><link rel="prefetch" href="/fe-mindmap/assets/js/69.f0da40be.js"><link rel="prefetch" href="/fe-mindmap/assets/js/7.82e74729.js"><link rel="prefetch" href="/fe-mindmap/assets/js/70.6a277fc6.js"><link rel="prefetch" href="/fe-mindmap/assets/js/71.79229262.js"><link rel="prefetch" href="/fe-mindmap/assets/js/72.82eba30e.js"><link rel="prefetch" href="/fe-mindmap/assets/js/73.53897e0c.js"><link rel="prefetch" href="/fe-mindmap/assets/js/74.1e88a1f8.js"><link rel="prefetch" href="/fe-mindmap/assets/js/75.9f37605f.js"><link rel="prefetch" href="/fe-mindmap/assets/js/76.03f3c91c.js"><link rel="prefetch" href="/fe-mindmap/assets/js/77.aeb38045.js"><link rel="prefetch" href="/fe-mindmap/assets/js/78.cab1fe9c.js"><link rel="prefetch" href="/fe-mindmap/assets/js/79.a6b5c0e3.js"><link rel="prefetch" href="/fe-mindmap/assets/js/8.ac01aade.js"><link rel="prefetch" href="/fe-mindmap/assets/js/80.b342bb6f.js"><link rel="prefetch" href="/fe-mindmap/assets/js/81.e34a8892.js"><link rel="prefetch" href="/fe-mindmap/assets/js/82.fc39a22a.js"><link rel="prefetch" href="/fe-mindmap/assets/js/83.7aa26956.js"><link rel="prefetch" href="/fe-mindmap/assets/js/9.3928259a.js">
    <link rel="stylesheet" href="/fe-mindmap/assets/css/0.styles.83faaa54.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fe-mindmap/" class="home-link router-link-active"><img src="/fe-mindmap/images/chameleon.png" alt="fe-mindmap" class="logo"> <span class="site-name can-hide">fe-mindmap</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/maqingbo/fe-mindmap" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/maqingbo/fe-mindmap" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/fe-mindmap/parts/map/" class="sidebar-link">æ€»è§ˆ</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>HTML</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe-mindmap/parts/html/" class="sidebar-link">æ”¶é›†ç®±</a></li><li><a href="/fe-mindmap/parts/html/interview.html" class="sidebar-link">é¢è¯•é¢˜</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CSS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe-mindmap/parts/css/" class="sidebar-link">æ”¶é›†ç®±</a></li><li><a href="/fe-mindmap/parts/css/overView.html" class="sidebar-link">æ¦‚è§ˆ</a></li><li><a href="/fe-mindmap/parts/css/keyConcepts.html" class="sidebar-link">å…³é”®æ¦‚å¿µ</a></li><li><a href="/fe-mindmap/parts/css/atRules.html" class="sidebar-link">atRules</a></li><li><a href="/fe-mindmap/parts/css/inlineFormatting.html" class="sidebar-link">è§†è§‰æ’ç‰ˆæ¨¡å‹ç»†èŠ‚</a></li><li><a href="/fe-mindmap/parts/css/stackingContext.html" class="sidebar-link">å±‚å ä¸Šä¸‹æ–‡</a></li><li><a href="/fe-mindmap/parts/css/processor.html" class="sidebar-link">CSS å¤„ç†å™¨</a></li><li><a href="/fe-mindmap/parts/css/mixin.html" class="sidebar-link">å¸¸ç”¨ mixin</a></li><li><a href="/fe-mindmap/parts/css/h5.html" class="sidebar-link">ç§»åŠ¨ç«¯</a></li><li><a href="/fe-mindmap/parts/css/bestPractice.html" class="sidebar-link">æœ€ä½³å®è·µ</a></li><li><a href="/fe-mindmap/parts/css/interview.html" class="sidebar-link">é¢è¯•é¢˜</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe-mindmap/parts/javascript/inBox.html" class="sidebar-link">æ”¶é›†ç®±</a></li><li><a href="/fe-mindmap/parts/javascript/overView.html" class="sidebar-link">æ¦‚å¿µ</a></li><li><a href="/fe-mindmap/parts/javascript/dataType.html" class="sidebar-link">æ•°æ®ç±»å‹</a></li><li><a href="/fe-mindmap/parts/javascript/builtIn.html" class="sidebar-link">å†…ç½®å¯¹è±¡</a></li><li><a href="/fe-mindmap/parts/javascript/execution.html" class="sidebar-link">JS æ‰§è¡Œè¿‡ç¨‹</a></li><li><a href="/fe-mindmap/parts/javascript/closure.html" class="sidebar-link">é—­åŒ…</a></li><li><a href="/fe-mindmap/parts/javascript/function.html" class="sidebar-link">å‡½æ•°</a></li><li><a href="/fe-mindmap/parts/javascript/prototype.html" class="sidebar-link">åŸå‹ä¸ç»§æ‰¿</a></li><li><a href="/fe-mindmap/parts/javascript/async.html" class="sidebar-link">å¼‚æ­¥ç¼–ç¨‹</a></li><li><a href="/fe-mindmap/parts/javascript/promise.html" class="sidebar-link">Promise</a></li><li><a href="/fe-mindmap/parts/javascript/module.html" class="sidebar-link">æ¨¡å—åŒ–</a></li><li><a href="/fe-mindmap/parts/javascript/handWritten.html" class="sidebar-link">æ‰‹å†™ç³»åˆ—</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Web APIs</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe-mindmap/parts/webApis/" class="sidebar-link">æ”¶é›†ç®±</a></li><li><a href="/fe-mindmap/parts/webApis/DOM.html" class="sidebar-link">DOM</a></li><li><a href="/fe-mindmap/parts/webApis/event.html" class="sidebar-link">äº‹ä»¶</a></li><li><a href="/fe-mindmap/parts/webApis/BOM.html" class="sidebar-link">BOM</a></li><li><a href="/fe-mindmap/parts/webApis/XHR.html" class="sidebar-link">XMLHttpRequest</a></li><li><a href="/fe-mindmap/parts/webApis/formData.html" class="sidebar-link">FormData</a></li><li><a href="/fe-mindmap/parts/webApis/storage.html" class="sidebar-link">æœ¬åœ°å­˜å‚¨</a></li><li><a href="/fe-mindmap/parts/webApis/WebGL.html" class="sidebar-link">WebGL</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æµè§ˆå™¨</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe-mindmap/parts/browser/" class="sidebar-link">æ”¶é›†ç®±</a></li><li><a href="/fe-mindmap/parts/browser/render.html" class="sidebar-link">å†…éƒ¨åŸç†</a></li><li><a href="/fe-mindmap/parts/browser/client.html" class="sidebar-link">å®¢æˆ·ç«¯èƒ½åŠ›</a></li><li><a href="/fe-mindmap/parts/browser/performance.html" class="sidebar-link">æ€§èƒ½ä¼˜åŒ–</a></li><li><a href="/fe-mindmap/parts/browser/interview.html" class="sidebar-link">é¢è¯•é¢˜</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å°ç¨‹åº</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe-mindmap/parts/miniProgram/" class="sidebar-link">æ”¶é›†ç®±</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ç½‘ç»œé€šä¿¡</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe-mindmap/parts/network/" class="sidebar-link">æ”¶é›†ç®±</a></li><li><a href="/fe-mindmap/parts/network/protocol.html" class="sidebar-link">ç½‘ç»œåè®®</a></li><li><a href="/fe-mindmap/parts/network/http.html" class="sidebar-link">HTTP</a></li><li><a href="/fe-mindmap/parts/network/http2.html" class="sidebar-link">HTTP 2.0</a></li><li><a href="/fe-mindmap/parts/network/security.html" class="sidebar-link">ç½‘ç»œå®‰å…¨</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe-mindmap/parts/vue/" aria-current="page" class="sidebar-link">æ”¶é›†ç®±</a></li><li><a href="/fe-mindmap/parts/vue/base.html" class="sidebar-link">åŸºç¡€</a></li><li><a href="/fe-mindmap/parts/vue/component.html" class="sidebar-link">ç»„ä»¶</a></li><li><a href="/fe-mindmap/parts/vue/principle.html" aria-current="page" class="active sidebar-link">åŸç†</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-mindmap/parts/vue/principle.html#vue-2" class="sidebar-link">Vue 2</a></li><li class="sidebar-sub-header"><a href="/fe-mindmap/parts/vue/principle.html#vue-3" class="sidebar-link">Vue 3</a></li><li class="sidebar-sub-header"><a href="/fe-mindmap/parts/vue/principle.html#å‚è€ƒ" class="sidebar-link">å‚è€ƒ</a></li></ul></li><li><a href="/fe-mindmap/parts/vue/ecosystem.html" class="sidebar-link">ç”Ÿæ€</a></li><li><a href="/fe-mindmap/parts/vue/source.html" class="sidebar-link">æºç </a></li><li><a href="/fe-mindmap/parts/vue/berwin.html" class="sidebar-link">æ·±å…¥æµ…å‡º Vue.js</a></li><li><a href="/fe-mindmap/parts/vue/interview.html" class="sidebar-link">é¢è¯•é¢˜</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å‰ç«¯å·¥ç¨‹åŒ–</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe-mindmap/parts/engineering/" class="sidebar-link">æ”¶é›†ç®±</a></li><li><a href="/fe-mindmap/parts/engineering/script.html" class="sidebar-link">è„šæœ¬</a></li><li><a href="/fe-mindmap/parts/engineering/standard.html" class="sidebar-link">è§„èŒƒ</a></li><li><a href="/fe-mindmap/parts/engineering/test.html" class="sidebar-link">æµ‹è¯•ã€ç›‘æ§</a></li><li><a href="/fe-mindmap/parts/engineering/design.html" class="sidebar-link">å·¥ç¨‹è®¾è®¡</a></li><li><a href="/fe-mindmap/parts/engineering/build.html" class="sidebar-link">æ„å»º</a></li><li><a href="/fe-mindmap/parts/engineering/devops.html" class="sidebar-link">æŒç»­é›†æˆ</a></li><li><a href="/fe-mindmap/parts/engineering/git.html" class="sidebar-link">Git</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æ•°æ®ç»“æ„ä¸ç®—æ³•</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe-mindmap/parts/algorithms/dataStructure.html" class="sidebar-link">æ•°æ®ç»“æ„</a></li><li><a href="/fe-mindmap/parts/algorithms/algorithm.html" class="sidebar-link">ç®—æ³•</a></li><li><a href="/fe-mindmap/parts/algorithms/sort.html" class="sidebar-link">æ’åº</a></li><li><a href="/fe-mindmap/parts/algorithms/topic.html" class="sidebar-link">é¢˜ç›®</a></li><li><a href="/fe-mindmap/parts/algorithms/bookNote.html" class="sidebar-link">å­¦ä¹ JavaScriptæ•°æ®ç»“æ„ä¸ç®—æ³•</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>è½¯ä»¶è®¾è®¡</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe-mindmap/parts/design/" class="sidebar-link">æ”¶é›†ç®±</a></li><li><a href="/fe-mindmap/parts/design/language.html" class="sidebar-link">ç¨‹åºè®¾è®¡è¯­è¨€</a></li><li><a href="/fe-mindmap/parts/design/paradigm.html" class="sidebar-link">ç¼–ç¨‹èŒƒå¼</a></li><li><a href="/fe-mindmap/parts/design/pattern.html" class="sidebar-link">è®¾è®¡æ¨¡å¼</a></li><li><a href="/fe-mindmap/parts/design/method.html" class="sidebar-link">è®¾è®¡æ–¹æ³•</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ä¸šåŠ¡ç›¸å…³</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe-mindmap/parts/business/" class="sidebar-link">æ”¶é›†ç®±</a></li><li><a href="/fe-mindmap/parts/business/gis.html" class="sidebar-link">Web GIS</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>ä¸‰ä¸ªæ ¸å¿ƒæ¨¡å—ï¼š</p> <ul><li>å“åº”å¼ (Reactivity)</li> <li>æ¨¡æ¿ç¼–è¯‘ (Complier)</li> <li>æ¸²æŸ“ (Renderer)</li></ul> <p>Reactivity æ¨¡å—å…è®¸æˆ‘ä»¬åˆ›å»ºå“åº”å¼çš„å¯¹è±¡ï¼Œå°†ä½¿ç”¨å¯¹è±¡çš„ä¾èµ–ä¿å­˜èµ·æ¥ï¼Œå¹¶ä¸”è§‚å¯Ÿå¯¹è±¡çš„å˜åŒ–ï¼Œå½“å¯¹è±¡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¿è¡Œåˆšåˆšä¿å­˜èµ·æ¥çš„ä¾èµ–ã€‚JS ä¸­æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥ç›‘æµ‹å¯¹è±¡çš„å˜åŒ–ï¼šObject.defineProperty å’Œ Proxyã€‚</p> <p>Complier æ¨¡å—å¯ä»¥è¯†åˆ« HTML æ¨¡æ¿ (template)ï¼Œå°†å…¶ç¼–è¯‘ä¸ºæ¸²æŸ“å‡½æ•° (Render Function)ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸€èˆ¬æ˜¯å‘ç”Ÿåœ¨ç¼–è¯‘æ‰“åŒ…é˜¶æ®µã€‚</p> <p>Renderer æ¨¡å—è´Ÿè´£å°†ä¸åŒç»„ä»¶æ¸²æŸ“åœ¨é¡µé¢ä¸Šï¼Œå¯åˆ†æˆä¸‰ä¸ªé˜¶æ®µï¼šæ¸²æŸ“ã€æŒ‚è½½ã€è¡¥ä¸ã€‚</p> <ul><li>æ¸²æŸ“ (Render)
<ul><li>è°ƒç”¨ Render Functionï¼Œè¿”å› virtual DOM node(VNode)ï¼›</li></ul></li> <li>æŒ‚è½½ (Mount)
<ul><li>VNode è½¬æˆ DOM å…ƒç´ ï¼Œæ¸²æŸ“é¡µé¢ï¼›</li></ul></li> <li>è¡¥ä¸ (Patch)
<ul><li>ç”Ÿæˆæ–°çš„ VNodeï¼Œä¸æ—§çš„ VNode æ¯”è¾ƒï¼Œåªæ›´æ–°å˜åŒ–çš„éƒ¨åˆ†ã€‚</li></ul></li></ul> <h2 id="vue-2"><a href="#vue-2" class="header-anchor">#</a> Vue 2</h2> <p>vue 2 ä½¿ç”¨ Object.defineProperty æ–¹æ³•é€šè¿‡å®šä¹‰å¯¹è±¡çš„ getter å’Œ setter æ¥ç›‘æµ‹å¯¹è±¡çš„å˜åŒ–ï¼Œå¹¶ä¸”æ”¶é›†ä½¿ç”¨äº†è¿™ä¸ªå¯¹è±¡çš„ä¾èµ–ï¼Œå¯¹è±¡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé€šçŸ¥å„ä¸ªä¾èµ–è¿›è¡Œæ›´æ–°ã€‚ï¼ˆè§‚å¯Ÿè€…æ¨¡å¼ï¼‰</p> <blockquote><p>è§‚å¯Ÿè€…æ¨¡å¼ï¼šå®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå³å½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½ä¼šå¾—åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°ã€‚</p></blockquote> <p><img src="/fe-mindmap/assets/img/observer-design.5de7af21.png" alt=""> <em>å›¾ 01</em></p> <p>å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªç®€å•çš„å“åº”å¼æ¥äº†è§£ vue å†…éƒ¨çš„å·¥ä½œæœºåˆ¶ï¼š</p> <p>æ¯”æ–¹è¯´æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªå¯¹è±¡ dataï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span> price<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> num<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>è¿˜æœ‰ä¸€ä¸ªè®¡ç®—æ€»å’Œçš„å‡½æ•° totalï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">total</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> data<span class="token punctuation">.</span>price <span class="token operator">*</span> data<span class="token punctuation">.</span>num
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä»€ä¹ˆæ˜¯å“åº”å¼ï¼Ÿåœ¨ä¿®æ”¹ price å±æ€§çš„æ—¶å€™ï¼Œtotal å‡½æ•°èƒ½è‡ªåŠ¨æ‰§è¡Œå¸®æˆ‘ä»¬è®¡ç®—å‡ºæ€»å’Œå°±æ˜¯å“åº”å¼ï¼</p> <p>åœ¨åŸç”Ÿ JavaScript ä¸­è¿™æ˜¯æ— æ³•å®ç°çš„ï¼Œæƒ³è¦è¾¾åˆ°æ•ˆæœï¼Œæˆ‘ä»¬å¿…é¡»æ‰‹åŠ¨çš„å»è°ƒç”¨ total å‡½æ•°ã€‚è¿™æ˜¯å› ä¸ºï¼Œåœ¨ JavaScript ä¸­ï¼Œæ¯ä¸ªå±æ€§éƒ½æ˜¯ç”±ç‰¹æ€§æ¥æè¿°çš„ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹ price å±æ€§æ—¶ï¼Œå®é™…æ˜¯è°ƒç”¨äº† price çš„ set ç‰¹æ€§ã€‚åœ¨åŸç”Ÿ JavaScript ä¸­ï¼Œset ç‰¹æ€§åªæ˜¯å»ä¿®æ”¹äº† price çš„å€¼ï¼Œå¹¶æ²¡æœ‰åšå…¶ä»–çš„äº‹æƒ…ã€‚</p> <p>å¦‚æœæƒ³åœ¨è°ƒç”¨ set ç‰¹æ€§æ—¶å»åšä¸€äº›å…¶ä»–çš„äº‹æƒ…ï¼ˆæ¯”å¦‚è°ƒç”¨ total å‡½æ•°ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ Object.defineProperty æ¥ä¿®æ”¹é»˜è®¤çš„ set ç‰¹æ€§ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token string">'price'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">set</span> <span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data<span class="token punctuation">.</span>price <span class="token operator">=</span> newVal
    <span class="token function">total</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>æ­¤æ—¶å¦‚æœå†å»ä¿®æ”¹ priceï¼ŒJavaScript å°±ä¼šè‡ªåŠ¨çš„å¸®æˆ‘ä»¬è®¡ç®—æ€»å’Œï¼</p> <p>ä½†æ˜¯æˆ‘ä»¬å¯èƒ½ä¸æ­¢è¦æ‰§è¡Œ total è¿™ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å£°æ˜ä¸€ä¸ªæ•°ç»„ï¼ŒæŠŠè¦æ‰§è¡Œçš„å‡½æ•°å­˜èµ·æ¥ï¼Œè°ƒç”¨ set çš„æ—¶å€™æŒ¨ä¸ªæ‰§è¡Œå°±å¥½äº†ï¼å°±å«ä»– dependencies å§ï¼Œç®€ç§° depã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Dep</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å­˜åˆ°è¿™ä¸ªé‡Œè¾¹</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// è®°å½•è¦æ‰§è¡Œçš„å‡½æ•° target</span>
  <span class="token function">depend</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>target <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// æŒ¨ä¸ªæ‰§è¡Œ</span>
  <span class="token function">notify</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">sub</span> <span class="token operator">=&gt;</span> <span class="token function">sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>ç°åœ¨æˆ‘ä»¬å®Œæ•´çš„æŠŠ data å¯¹è±¡å¤„ç†ä¸€éï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span> price<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> num<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> dep <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dep</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> target

<span class="token keyword">function</span> <span class="token function">total</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> data<span class="token punctuation">.</span>price <span class="token operator">*</span> data<span class="token punctuation">.</span>num

<span class="token keyword">function</span> <span class="token function">watcher</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  target <span class="token operator">=</span> fn
  <span class="token function">target</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  target <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span>

<span class="token function">watcher</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span>

Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// å‡½æ•°å­˜èµ·æ¥</span>
      dep<span class="token punctuation">.</span><span class="token function">depend</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> data<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token function">set</span> <span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>newVal <span class="token operator">===</span> val<span class="token punctuation">)</span> <span class="token keyword">return</span>
      data<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> newVal
      <span class="token comment">// å‡½æ•°æ‰§è¡Œ</span>
      dep<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span> <span class="token comment">// 10</span>
data<span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token number">10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span> <span class="token comment">// 20</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>è‡³æ­¤ï¼Œä¸€ä¸ªç®€å•çš„å“åº”å¼å°±å®ç°äº†ï¼æˆ‘ä»¬ç»§ç»­ã€‚</p> <p>å“åº”å¼åˆ›å»ºå®Œæ¯•åï¼Œvue ä¼šå°† template éƒ¨åˆ†ç¼–è¯‘æˆ render functionï¼Œè¿”å›ä¸€ä¸ª virtual DOMï¼ˆé€šè¿‡ json å¯¹è±¡æ¥æè¿°çš„ DOM å¯¹è±¡ï¼‰ï¼Œç„¶åè½¬æ¢æˆçœŸå®çš„ DOM å¹¶æ¸²æŸ“ã€‚</p> <h2 id="vue-3"><a href="#vue-3" class="header-anchor">#</a> Vue 3</h2> <p>vue 3 ä¸­ç›‘æµ‹å¯¹è±¡å±æ€§çš„å˜åŒ–ä½¿ç”¨çš„æ˜¯ proxyï¼ŒåŸç†ç±»ä¼¼ï¼Œä¹Ÿæ˜¯å°†ä½¿ç”¨äº†åŒä¸€çŠ¶æ€çš„ä¾èµ–è®°å½•ä¸‹æ¥ï¼ŒçŠ¶æ€æ”¹å˜æ—¶é€šçŸ¥ä¾èµ–æ›´æ–°ï¼Œåªä¸è¿‡ç›‘æµ‹çŠ¶æ€ï¼ˆå¯¹è±¡å±æ€§ï¼‰å’Œè®°å½•ä¾èµ–çš„æ–¹å¼ä¸å¤ªä¸€æ ·ã€‚</p> <p>è¿˜ä»¥ä¸Šé¢çš„ä»£ç ä¸ºä¾‹ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span> price<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> num<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> total <span class="token operator">=</span> <span class="token number">0</span>

<span class="token comment">// total å‡½æ•°æ›´åä¸º effect</span>
<span class="token comment">// ä»£è¡¨æ‰€æœ‰è¦è§¦å‘çš„åŠ¨ä½œ</span>
<span class="token keyword">function</span> <span class="token function">effect</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  total <span class="token operator">=</span> data<span class="token punctuation">.</span>price <span class="token operator">*</span> data<span class="token punctuation">.</span>num
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ä¸ 2.x ä¸åŒçš„æ˜¯ï¼Œeffect è¢«ä¿å­˜åˆ°äº†ä¸€ä¸ª Set å®ä¾‹ä¸­ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚è€Œä¸”å®ƒä¹Ÿä¸å†å­˜åœ¨äº Dep ç±»ä¸­ï¼ŒDep ç±»è¢«æ‹†åˆ†æˆ dep å˜é‡ã€track å‡½æ•°å’Œ trigger å‡½æ•°ã€‚å˜é‡ä¿å­˜ effectsï¼Œtrack è®°å½•ä¾èµ–ï¼Œtrigger é€šçŸ¥ä¾èµ–ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span> price<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> num<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> total <span class="token operator">=</span> <span class="token number">0</span>

<span class="token keyword">let</span> dep <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> <span class="token function-variable function">effect</span> <span class="token operator">=</span>  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> total <span class="token operator">=</span> data<span class="token punctuation">.</span>price <span class="token operator">*</span> data<span class="token punctuation">.</span>num <span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">track</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> dep<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>effect<span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">trigger</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> dep<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">effect</span> <span class="token operator">=&gt;</span> <span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>

<span class="token function">track</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>å¯¹è±¡ã€å±æ€§å’Œ effectï¼Œæ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ã€‚æˆ‘ä»¬ä¼šæœ‰å¤šä¸ªå“åº”å¼å¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡æœ‰å¤šä¸ªå±æ€§ï¼Œè€Œæ¯ä¸ªå±æ€§åˆæœ‰å¤šä¸ª effectã€‚å¦‚ä¸‹å›¾ï¼š</p> <p><img src="/fe-mindmap/assets/img/vue3-effects-2.152a8828.png" alt=""></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> targetMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">track</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> depsMap <span class="token operator">=</span> targetMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>depsMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    targetMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token punctuation">(</span>depsMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> dep <span class="token operator">=</span> depsMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>dep<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    depsMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">dep</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// è®°å½•ä¾èµ–</span>
  dep<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>effect<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">trigger</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> depsMap <span class="token operator">=</span> targetMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>depsMap<span class="token punctuation">)</span> <span class="token keyword">return</span>
  <span class="token keyword">let</span> dep <span class="token operator">=</span> depsMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>dep<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// é€šçŸ¥ä¾èµ–</span>
    deps<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">effect</span> <span class="token operator">=&gt;</span> <span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span> price<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> num<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> total <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">let</span> <span class="token function-variable function">effect</span> <span class="token operator">=</span>  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> total <span class="token operator">=</span> data<span class="token punctuation">.</span>price <span class="token operator">*</span> data<span class="token punctuation">.</span>num <span class="token punctuation">}</span>

<span class="token comment">// é¦–æ¬¡æ‰§è¡Œï¼Œè®°å½•ä¾èµ–</span>
<span class="token function">track</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token string">'price'</span><span class="token punctuation">)</span>
<span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span> <span class="token comment">// 10</span>
data<span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token number">20</span>
<span class="token function">trigger</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token string">'price'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span> <span class="token comment">// 40</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>æ­¤æ—¶æˆ‘ä»¬ä¾ç„¶éœ€è¦æ‰‹åŠ¨æ‰§è¡Œ trackã€triggerï¼Œå®ç°äº†æ‰‹åŠ¨å®ç°å“åº”å¼ğŸ˜„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å…³æ³¨çš„æ˜¯å¦‚ä½•ä½¿ç”¨ proxy ç›‘æµ‹ data å¯¹è±¡çš„å˜åŒ–ã€‚</p> <p>vue 2 ä¸­æˆ‘ä»¬ä½¿ç”¨ Object.defineProperty æ¥ä¿®æ”¹å¯¹è±¡çš„ getã€set æ–¹æ³•ï¼Œè€Œ proxy å¯ä»¥è¿”å›ä¸€ä¸ªå¯¹è±¡çš„ä»£ç†ï¼Œæ¥å¯¹ç›®æ ‡å®ç°æ‹¦æˆªå’Œè‡ªå®šä¹‰ã€‚æˆ‘ä»¬é€šè¿‡å¯¹ä»£ç†å¯¹è±¡çš„ä¿®æ”¹ï¼Œå®ç°å¯¹å±æ€§å˜åŒ–çš„ç›‘æµ‹ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">// è‡ªå®šä¹‰çš„ä»£ç  })</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å…¶å®ä½¿ç”¨ proxyï¼Œä¾ç„¶æ˜¯ä¿®æ”¹å±æ€§çš„ getã€set ç‰¹æ€§ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">reactive</span> <span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">get</span> <span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// proxy å†…éƒ¨éœ€è¦ä½¿ç”¨ Reflect æ¥è®¿é—®åŸå¯¹è±¡çš„å±æ€§</span>
      <span class="token keyword">let</span> result <span class="token operator">=</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span>
      <span class="token comment">// è®°å½•ä¾èµ–</span>
      <span class="token function">track</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">)</span>
      <span class="token keyword">return</span> result
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">set</span> <span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> oldVal <span class="token operator">=</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
      <span class="token comment">// åŒæ ·éœ€è¦ä½¿ç”¨ Reflect æ¥è®¾ç½®åŸå¯¹è±¡çš„å±æ€§</span>
      <span class="token keyword">let</span> result <span class="token operator">=</span> Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>oldVal <span class="token operator">!==</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// é€šçŸ¥ä¾èµ–</span>
        <span class="token function">trigger</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> result
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>å¦‚æ­¤ä¸€æ¥ï¼Œæˆ‘ä»¬åªè¦ä½¿ç”¨ reactive å‡½æ•°å¤„ç†ä¸€ä¸‹ data å¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªå“åº”å¼çš„å¯¹è±¡ï¼</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> product <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span> <span class="token comment">// 10</span>
data<span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token number">20</span>
<span class="token comment">//  ä¸å†è°ƒç”¨ trigger</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span> <span class="token comment">// 40</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="header-anchor">#</a> å‚è€ƒ</h2> <ul><li><a href="https://www.vuemastery.com/courses-path/advanced" target="_blank" rel="noopener noreferrer">vue mastery - advanced<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">3/21/2022, 9:33:03 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/fe-mindmap/parts/vue/component.html" class="prev">
        ç»„ä»¶
      </a></span> <span class="next"><a href="/fe-mindmap/parts/vue/ecosystem.html">
        ç”Ÿæ€
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/fe-mindmap/assets/js/app.2313ca78.js" defer></script><script src="/fe-mindmap/assets/js/2.367c7136.js" defer></script><script src="/fe-mindmap/assets/js/19.352063da.js" defer></script>
  </body>
</html>
