(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{394:function(t,v,_){t.exports=_.p+"assets/img/mp-01.5c91db0e.png"},395:function(t,v,_){t.exports=_.p+"assets/img/mp-02.2d1bc9f6.png"},396:function(t,v,_){t.exports=_.p+"assets/img/mp-03.eca4c9b6.jpg"},397:function(t,v,_){t.exports=_.p+"assets/img/mp-05.6098d786.png"},474:function(t,v,_){"use strict";_.r(v);var e=_(46),r=Object(e.a)({},(function(){var t=this,v=t.$createElement,e=t._self._c||v;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[t._v("小程序是一种不需要下载安装即可使用的应用，是一种为了解决 WebView 存在的问题而出现的解决方案，本质上还是 Web 网页。")]),t._v(" "),e("p",[t._v("目前，除了微信小程序，还有百度、支付宝、抖音、快应用等类小程序方案，由每个平台自己开发，并且都有一些对于平台的针对性和单独的特点。")]),t._v(" "),e("h2",{attrs:{id:"背景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[t._v("#")]),t._v(" 背景")]),t._v(" "),e("p",[t._v("最初，移动 web 主要有两个入口，一个是移动端的浏览器 app，一个是其他 app 中嵌套的 WebView，相当于是一个阉割版的浏览器，功能比常规浏览器会少一些。")]),t._v(" "),e("p",[t._v("当微信中的 WebView 逐渐成为移动 Web 的⼀个重要⼊⼝时，微信为了增强移动 web 的能⼒，将一些原生 APP 的功能封装成一个开发工具包 JS-SDK，并暴露给开发者，其中包括拍摄、录音、语音识别、二维码、地图、支付、分享、卡券等几十个 API。这样的话，之前原生 APP 才能使用的一些功能，现在通过 js 就能调用。")]),t._v(" "),e("p",[e("img",{attrs:{src:_(394),alt:""}})]),t._v(" "),e("p",[t._v("然而在这些功能之外，JS-SDK 并不能解决 WebView 在体验上的一些其他问题，比如初始化时长时间白屏、页面切换生硬、点击页面反应迟钝等。所以微信开始考虑做一个系统，能在更深入的层面去解决或者优化这些问题。")]),t._v(" "),e("ul",[e("li",[t._v("方案 1：React Native\n"),e("ul",[e("li",[t._v("过度依赖客户端")]),t._v(" "),e("li",[t._v("版权问题")])])]),t._v(" "),e("li",[t._v("方案 2：Hybird\n"),e("ul",[e("li",[t._v("把 H5 所有代码打包，一次性 Load 到本地再打开")]),t._v(" "),e("li",[t._v("近似 web 的开发方式")]),t._v(" "),e("li",[t._v("可以做到云端更新")])])])]),t._v(" "),e("p",[t._v("Hybird 带来的问题：")]),t._v(" "),e("p",[t._v("Q：离线包内的代码不好管控，DOM API 太多，跳转外链、操作界面、动态运行脚本等不好控制。"),e("br"),t._v("\nA：采用双线程，渲染层 (WebView) 和逻辑层 (JDCore) 分离。不使用 HTML，自己封装一套 XML 代码。")]),t._v(" "),e("p",[e("img",{attrs:{src:_(395),alt:""}})]),t._v(" "),e("p",[t._v("Q：双线程的话，页面变化如何实现？"),e("br"),t._v("\nA：数据驱动。WXML 实现双向绑定语法，逻辑层提供了 setData 等 API，使用 Virtual DOM 进行 diff。")]),t._v(" "),e("p",[t._v("数据通信、API、VD 算法等这些功能封装起来就是"),e("strong",[t._v("基础库")]),t._v("。")]),t._v(" "),e("p",[e("img",{attrs:{src:_(396),alt:""}})]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("吐槽")]),t._v(" "),e("p",[t._v("技术角度来讲：就是一个魔改版的不开放的套壳 Web，且一整套流程全部闭环，IDE-编程语言-API-运行环境-审核，全部自己掌控；")]),t._v(" "),e("p",[t._v("商业角度来讲：巨头们创建封闭生态、掌控私有流量的工具而已。")])]),t._v(" "),e("h2",{attrs:{id:"与普通网页开发的区别"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#与普通网页开发的区别"}},[t._v("#")]),t._v(" 与普通网页开发的区别")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th"),t._v(" "),e("th",[t._v("普通网页")]),t._v(" "),e("th",[t._v("小程序")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("开发环境")]),t._v(" "),e("td",[t._v("浏览器、IDE")]),t._v(" "),e("td",[t._v("申请账号、开发者工具、配置项目")])]),t._v(" "),e("tr",[e("td",[t._v("开发语言")]),t._v(" "),e("td",[t._v("HTML、CSS、JS")]),t._v(" "),e("td",[t._v("WXML、CSS、JS")])]),t._v(" "),e("tr",[e("td",[t._v("运行环境")]),t._v(" "),e("td",[t._v("PC 浏览器、移动浏览器、各种 WebView")]),t._v(" "),e("td",[t._v("安卓和 IOS 的 WebView、开发者工具")])]),t._v(" "),e("tr",[e("td",[t._v("渲染机制")]),t._v(" "),e("td",[t._v("渲染线程+脚本线程，互斥，脚本会阻塞解析")]),t._v(" "),e("td",[t._v("逻辑层、渲染层分开，没有 DOM、BOM；"),e("br"),t._v("JSCore 无法运行 npm 包")])]),t._v(" "),e("tr",[e("td",[t._v("发布流程")]),t._v(" "),e("td",[t._v("直接放服务器")]),t._v(" "),e("td",[t._v("体积限制，需要审核")])])])]),t._v(" "),e("h2",{attrs:{id:"架构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#架构"}},[t._v("#")]),t._v(" 架构")]),t._v(" "),e("p",[e("img",{attrs:{src:_(397),alt:""}})]),t._v(" "),e("h2",{attrs:{id:"常用框架"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常用框架"}},[t._v("#")]),t._v(" 常用框架")]),t._v(" "),e("p",[t._v("todo")]),t._v(" "),e("h2",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://developers.weixin.qq.com/community/develop/article/doc/000a4c1620c188f3adf7db9ab5b413",target:"_blank",rel:"noopener noreferrer"}},[t._v("小程序架构设计"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://segmentfault.com/a/1190000018631528",target:"_blank",rel:"noopener noreferrer"}},[t._v("微信，支付宝小程序实现原理概述"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.infoq.cn/article/ulletz7q_ue4duptkgkc",target:"_blank",rel:"noopener noreferrer"}},[t._v("支付宝小程序技术架构全解析"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);v.default=r.exports}}]);